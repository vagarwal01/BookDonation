<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>Textbooks page</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/css/all.min.css">
    <link rel="stylesheet" href="/style_search_org.css">
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js">
    </script>
</head>

<body>
    <section id="header-navbar">
        <nav class="navbar navbar-expand-lg navbar-light bg-primary fixed-top">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item active">
                                <span style="font-size: 2em; color: black;">
                 <i class="fas fa-book-open"></i>
                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <h2 class="my-name-top">Book Donation&nbsp&nbsp&nbsp&nbsp&nbsp</h2>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard" style="padding-top: 12px;">
                            <span style="font-size: 1em; color: black; padding-top: 5em;">
                  <i class="fas fa-angle-double-up"></i>
                  <span class="sr-only">(current)</span>
                            </span>
                        </a>
                    </li>
                    <li class="nav-item hmepge_href">
                        <a class="nav-link" href="/dashboard">Dashboard&nbsp&nbsp&nbsp<span class="sr-only">(current)</span></a>
                    </li>
                </ul>

                <form class="form-inline my-2 my-lg-0"></form>
                <a class="nav-link" href="/logout">
                    <button class="btn btn-outline-light btn btn-dark" type="submit" style="width: 2.5cm;"></i>Logout</button>
                </a>
                </form>
            </div>
        </nav>
    </section>

    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="/Science6.jpg" class="d-block w-100" alt="Science">
                        </div>
                        <div class="carousel-item">
                            <img src="/Maths6.jpg" class="d-block w-100" alt="Mathematics">
                        </div>
                        <div class="carousel-item">
                            <img src="/Geo6.jpg" class="d-block w-100" alt="Geography">
                        </div>
                        <div class="carousel-item">
                            <img src="/Social6.jpg" class="d-block w-100" alt="Social">
                        </div>
                        <div class="carousel-item">
                            <img src="/SocialandPolitical6.jpg" class="d-block w-100" alt="Social and Political Science">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-md-7">
                <p class="sixthtb text-center">Text Books</p>
                <h2>Sixth class NCERT Text books</h2>
                <p>Product code: TXTB6</p>
                <img src="/Stars.png" class="star" alt="Stars">
                <p class="price">Rs.250</p>
                <p><b>Availability:</b> In stock</p>
                <p><b>Condition:</b> New</p>
                <p><b>Board:</b> NCERT</p>
                <label>Quantity:</label>
                <input type="text" name="" value="1">
                <button id="order-button1" class=" cart " type="button "> Buy Now</button><br><br>
                <input type="text" disabled style="width: max-content" hidden class="form-input" id="order-id" required>
                <button id="rzp-button1" hidden class=" cart " type="button "> Checkout</button><br><br>
                <input type="text" style="width: max-content" disabled hidden class="form-input" id="order-pay-id" required>
                <input type="text" style="width: max-content" disabled hidden class="form-input" id="order-sig" required>
                <button id="verify-button1" hidden class=" cart " type="button "> Verify</button><br><br>
            </div>
        </div>
    </div>


    <script>
        document.getElementById('order-button1').onclick = function(e) {
            var url = '/api/payment/order';
            var params = {
                amount: 25000,
                currency: "INR",
                receipt: "su001",
                payment_capture: '1'
            };

            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function(res) {
                if (xmlHttp.readyState === 4) {
                    res = JSON.parse(xmlHttp.responseText);
                    document.getElementById('order-id').value = res.sub.id;
                    $("#order-button1").attr("hidden", true);
                    $("#order-id").attr("hidden", false);
                    $("#rzp-button1").attr("hidden", false);
                }
            }
            xmlHttp.open("POST", url, true); // false for synchronous request
            xmlHttp.setRequestHeader("Content-type", "application/json");
            xmlHttp.send(JSON.stringify(params));
        }
    </script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        document.getElementById('rzp-button1').onclick = function(e) {
            var options = {
                "key": "rzp_test_jZtCzRwSuBVbAq", //Enter your razorpay key
                "currency": "INR",
                "name": "Razor Tutorial",
                "description": "Razor Test Transaction",
                "image": "https://previews.123rf.com/images/subhanbaghirov/subhanbaghirov1605/subhanbaghirov160500087/56875269-vector-light-bulb-icon-with-concept-of-idea-brainstorming-idea-illustration-.jpg",
                "order_id": document.getElementById('order-id').value,
                "handler": function(response) {
                    document.getElementById('order-pay-id').value = response.razorpay_payment_id;
                    document.getElementById('order-id').value = response.razorpay_order_id;
                    document.getElementById('order-sig').value = response.razorpay_signature;
                    $("#order-pay-id").attr("hidden", false);
                    $("#verify-button1").attr("hidden", false);
                    $("#rzp-button1").attr("hidden", true);
                },
                "theme": {
                    "color": "#227254"
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.open();
            e.preventDefault();
        }
    </script>

    <script>
        document.getElementById('verify-button1').onclick = function(e) {
            var url = '/api/payment/verify';
            var params = {
                razorpay_order_id: document.getElementById('order-id').value,
                razorpay_payment_id: document.getElementById('order-pay-id').value,
                razorpay_signature: document.getElementById('order-sig').value
            };
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function(res) {
                if (xmlHttp.readyState === 4) {
                    alert(JSON.parse(xmlHttp.responseText).status);
                    location.reload()
                }
            }
            xmlHttp.open("POST", url, true); // false for synchronous request
            xmlHttp.setRequestHeader("Content-type", "application/json");
            xmlHttp.send(JSON.stringify(params));
        }
    </script>

</body>

</html>